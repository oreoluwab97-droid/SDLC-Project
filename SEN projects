"""
Student Grade Management System
SEN Assignment - Full SDLC Implementation

This program implements a student grade management system with complete
Software Development Life Cycle documentation.

Author: Oreoluwa
Date: January 2026
"""


class Student:
    """
    Student class represents a student with their courses and grades.
    
    Attributes:
        student_id (str): Unique identifier for the student
        student_name (str): Name of the student
        courses (dict): Dictionary storing course_name as key and grade_value as value
    """
    
    def __init__(self, student_id, student_name):
        """
        Initialize a Student object.
        
        Args:
            student_id (str): Unique student identifier
            student_name (str): Name of the student
        """
        self.student_id = student_id
        self.student_name = student_name
        self.courses = {}
    
    def add_course(self, course_name, grade_value):
        """
        Add a course and its grade to the student's record.
        
        Args:
            course_name (str): Name of the course
            grade_value (float): Grade value for the course (0-100)
        """
        self.courses[course_name] = grade_value
        print(f"Grade added successfully for {course_name}!")
    
    def calculate_average(self):
        """
        Calculate the average grade across all courses.
        
        Returns:
            float: The grade_average of all courses, or 0 if no courses
        """
        if not self.courses:
            return 0
        
        grade_average = sum(self.courses.values()) / len(self.courses)
        return round(grade_average, 2)
    
    def get_report(self):
        """
        Generate a comprehensive student report.
        
        Returns:
            str: Formatted student_report containing all information
        """
        report = f"\n{'='*50}\n"
        report += f"STUDENT REPORT\n"
        report += f"{'='*50}\n"
        report += f"Student ID: {self.student_id}\n"
        report += f"Student Name: {self.student_name}\n"
        report += f"{'-'*50}\n"
        report += f"COURSES AND GRADES:\n"
        
        if not self.courses:
            report += "  No courses recorded yet.\n"
        else:
            for course_name, grade_value in self.courses.items():
                report += f"  {course_name}: {grade_value}\n"
        
        report += f"{'-'*50}\n"
        grade_average = self.calculate_average()
        report += f"Grade Average: {grade_average}\n"
        report += f"{'='*50}\n"
        
        return report


class GradeManagementSystem:
    """
    Main system class for managing all students and their grades.
    
    Attributes:
        students_database (dict): Dictionary storing student_id as key 
                                 and Student object as value
    """
    
    def __init__(self):
        """Initialize the Grade Management System with an empty database."""
        self.students_database = {}
    
    def add_student(self, student_id, student_name):
        """
        Add a new student to the system.
        
        Args:
            student_id (str): Unique identifier for the student
            student_name (str): Name of the student
        """
        if student_id in self.students_database:
            print(f"Error: Student with ID {student_id} already exists!")
            return
        
        new_student = Student(student_id, student_name)
        self.students_database[student_id] = new_student
        print(f"Student {student_name} added successfully!")
    
    def add_grade(self, student_id, course_name, grade_value):
        """
        Add a grade for a specific course to a student's record.
        
        Args:
            student_id (str): ID of the student
            course_name (str): Name of the course
            grade_value (float): Grade value (0-100)
        """
        if student_id not in self.students_database:
            print(f"Error: Student with ID {student_id} not found!")
            return
        
        # Validate grade_value
        if not (0 <= grade_value <= 100):
            print("Error: Grade must be between 0 and 100!")
            return
        
        student = self.students_database[student_id]
        student.add_course(course_name, grade_value)
    
    def view_student_report(self, student_id):
        """
        Display a comprehensive report for a specific student.
        
        Args:
            student_id (str): ID of the student
        """
        if student_id not in self.students_database:
            print(f"Error: Student with ID {student_id} not found!")
            return
        
        student = self.students_database[student_id]
        student_report = student.get_report()
        print(student_report)
    
    def list_all_students(self):
        """Display a list of all students in the system."""
        if not self.students_database:
            print("\nNo students in the system yet.")
            return
        
        print(f"\n{'='*50}")
        print("ALL STUDENTS")
        print(f"{'='*50}")
        
        for student_id, student in self.students_database.items():
            grade_average = student.calculate_average()
            num_courses = len(student.courses)
            print(f"ID: {student_id} | Name: {student.student_name} | "
                  f"Courses: {num_courses} | Average: {grade_average}")
        
        print(f"{'='*50}\n")
    
    def display_menu(self):
        """Display the main menu options."""
        print("\n" + "="*50)
        print("STUDENT GRADE MANAGEMENT SYSTEM")
        print("="*50)
        print("1. Add Student")
        print("2. Add Grade")
        print("3. View Student Report")
        print("4. List All Students")
        print("5. Exit")
        print("="*50)
    
    def run(self):
        """Main program loop - run the application."""
        print("\nWelcome to Student Grade Management System!")
        print("This system helps you manage student records and grades.")
        
        while True:
            self.display_menu()
            
            try:
                choice = input("\nEnter your choice (1-5): ").strip()
                
                if choice == '1':
                    # Add Student
                    print("\n--- ADD STUDENT ---")
                    student_id = input("Enter Student ID: ").strip()
                    student_name = input("Enter Student Name: ").strip()
                    
                    if student_id and student_name:
                        self.add_student(student_id, student_name)
                    else:
                        print("Error: Student ID and Name cannot be empty!")
                
                elif choice == '2':
                    # Add Grade
                    print("\n--- ADD GRADE ---")
                    student_id = input("Enter Student ID: ").strip()
                    course_name = input("Enter Course Name: ").strip()
                    
                    try:
                        grade_value = float(input("Enter Grade (0-100): ").strip())
                        
                        if course_name:
                            self.add_grade(student_id, course_name, grade_value)
                        else:
                            print("Error: Course name cannot be empty!")
                    except ValueError:
                        print("Error: Grade must be a number!")
                
                elif choice == '3':
                    # View Student Report
                    print("\n--- VIEW STUDENT REPORT ---")
                    student_id = input("Enter Student ID: ").strip()
                    self.view_student_report(student_id)
                
                elif choice == '4':
                    # List All Students
                    self.list_all_students()
                
                elif choice == '5':
                    # Exit
                    print("\nThank you for using Student Grade Management System!")
                    print("Goodbye!")
                    break
                
                else:
                    print("\nInvalid choice! Please enter a number between 1 and 5.")
            
            except KeyboardInterrupt:
                print("\n\nProgram interrupted. Exiting...")
                break
            except Exception as e:
                print(f"\nAn error occurred: {e}")
                print("Please try again.")


def main():
    """Main function to start the application."""
    system = GradeManagementSystem()
    system.run()


if __name__ == "__main__":
    main()
